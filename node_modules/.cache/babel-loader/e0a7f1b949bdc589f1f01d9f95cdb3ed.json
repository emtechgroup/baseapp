{"ast":null,"code":"import _objectSpread from \"/Users/anthonypafundi/Desktop/baseapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport update from 'immutability-helper';\nimport { defaultStorageLimit } from '../../../api';\nimport { sliceArray } from '../../../helpers';\nimport { API_KEY_CREATE, API_KEY_DELETE, API_KEY_UPDATE, API_KEYS_2FA_MODAL, API_KEYS_DATA, API_KEYS_ERROR } from './constants';\nexport var initialApiKeysState = {\n  apiKeys: [],\n  dataLoaded: false,\n  modal: {\n    active: false\n  },\n  pageIndex: 0,\n  nextPageExists: false\n};\nexport var apiKeysReducer = function apiKeysReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialApiKeysState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case API_KEYS_DATA:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        apiKeys: sliceArray(action.payload.apiKeys, defaultStorageLimit()),\n        dataLoaded: true,\n        pageIndex: action.payload.pageIndex,\n        nextPageExists: action.payload.nextPageExists\n      });\n\n    case API_KEY_CREATE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        apiKeys: state.apiKeys.concat(action.payload)\n      });\n\n    case API_KEY_UPDATE:\n      var apiKeyIndex = state.apiKeys.findIndex(function (e) {\n        return e.kid === action.payload.kid;\n      });\n      var apiKeys = update(state.apiKeys, {\n        [apiKeyIndex]: {\n          state: {\n            $set: action.payload.state\n          },\n          updated_at: {\n            $set: action.payload.updated_at\n          }\n        }\n      });\n      return _objectSpread(_objectSpread({}, state), {}, {\n        apiKeys\n      });\n\n    case API_KEY_DELETE:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        apiKeys: state.apiKeys.filter(function (apiKey) {\n          return apiKey.kid !== action.payload.kid;\n        })\n      });\n\n    case API_KEYS_2FA_MODAL:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        modal: action.payload\n      });\n\n    case API_KEYS_ERROR:\n      return initialApiKeysState;\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["/Users/anthonypafundi/Desktop/baseapp/src/modules/user/apiKeys/reducer.ts"],"names":["update","defaultStorageLimit","sliceArray","API_KEY_CREATE","API_KEY_DELETE","API_KEY_UPDATE","API_KEYS_2FA_MODAL","API_KEYS_DATA","API_KEYS_ERROR","initialApiKeysState","apiKeys","dataLoaded","modal","active","pageIndex","nextPageExists","apiKeysReducer","state","action","type","payload","concat","apiKeyIndex","findIndex","e","kid","$set","updated_at","filter","apiKey"],"mappings":";AAAA,OAAOA,MAAP,MAAmB,qBAAnB;AACA,SAASC,mBAAT,QAAoC,cAApC;AACA,SAASC,UAAT,QAA2B,kBAA3B;AAEA,SACIC,cADJ,EAEIC,cAFJ,EAGIC,cAHJ,EAIIC,kBAJJ,EAKIC,aALJ,EAMIC,cANJ,QAOO,aAPP;AAuBA,OAAO,IAAMC,mBAAiC,GAAG;AAC7CC,EAAAA,OAAO,EAAE,EADoC;AAE7CC,EAAAA,UAAU,EAAE,KAFiC;AAG7CC,EAAAA,KAAK,EAAE;AACHC,IAAAA,MAAM,EAAE;AADL,GAHsC;AAM7CC,EAAAA,SAAS,EAAE,CANkC;AAO7CC,EAAAA,cAAc,EAAE;AAP6B,CAA1C;AAUP,OAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,GAAsE;AAAA,MAArEC,KAAqE,uEAA7DR,mBAA6D;AAAA,MAAxCS,MAAwC;;AAChG,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKZ,aAAL;AACI,6CACOU,KADP;AAEIP,QAAAA,OAAO,EAAER,UAAU,CAACgB,MAAM,CAACE,OAAP,CAAeV,OAAhB,EAAyBT,mBAAmB,EAA5C,CAFvB;AAGIU,QAAAA,UAAU,EAAE,IAHhB;AAIIG,QAAAA,SAAS,EAAEI,MAAM,CAACE,OAAP,CAAeN,SAJ9B;AAKIC,QAAAA,cAAc,EAAEG,MAAM,CAACE,OAAP,CAAeL;AALnC;;AAOJ,SAAKZ,cAAL;AACI,6CACOc,KADP;AAEIP,QAAAA,OAAO,EAAEO,KAAK,CAACP,OAAN,CAAcW,MAAd,CAAqBH,MAAM,CAACE,OAA5B;AAFb;;AAIJ,SAAKf,cAAL;AACI,UAAMiB,WAAW,GAAGL,KAAK,CAACP,OAAN,CAAca,SAAd,CAAwB,UAAAC,CAAC;AAAA,eAAIA,CAAC,CAACC,GAAF,KAAUP,MAAM,CAACE,OAAP,CAAeK,GAA7B;AAAA,OAAzB,CAApB;AACA,UAAMf,OAAO,GAAGV,MAAM,CAACiB,KAAK,CAACP,OAAP,EAAgB;AAClC,SAACY,WAAD,GAAe;AACXL,UAAAA,KAAK,EAAE;AAACS,YAAAA,IAAI,EAAER,MAAM,CAACE,OAAP,CAAeH;AAAtB,WADI;AAEXU,UAAAA,UAAU,EAAE;AAACD,YAAAA,IAAI,EAAER,MAAM,CAACE,OAAP,CAAeO;AAAtB;AAFD;AADmB,OAAhB,CAAtB;AAOA,6CACOV,KADP;AAEIP,QAAAA;AAFJ;;AAIJ,SAAKN,cAAL;AACI,6CACOa,KADP;AAEIP,QAAAA,OAAO,EAAEO,KAAK,CAACP,OAAN,CAAckB,MAAd,CAAqB,UAAAC,MAAM;AAAA,iBAAIA,MAAM,CAACJ,GAAP,KAAeP,MAAM,CAACE,OAAP,CAAeK,GAAlC;AAAA,SAA3B;AAFb;;AAIJ,SAAKnB,kBAAL;AACI,6CACOW,KADP;AAEIL,QAAAA,KAAK,EAAEM,MAAM,CAACE;AAFlB;;AAIJ,SAAKZ,cAAL;AACI,aAAOC,mBAAP;;AACJ;AACI,aAAOQ,KAAP;AAxCR;AA0CH,CA3CM","sourcesContent":["import update from 'immutability-helper';\nimport { defaultStorageLimit } from '../../../api';\nimport { sliceArray } from '../../../helpers';\nimport { ApiKeyDataInterface, ApiKeysAction } from './actions';\nimport {\n    API_KEY_CREATE,\n    API_KEY_DELETE,\n    API_KEY_UPDATE,\n    API_KEYS_2FA_MODAL,\n    API_KEYS_DATA,\n    API_KEYS_ERROR,\n} from './constants';\n\nexport interface ApiKeyStateModal {\n    active: boolean;\n    action?: 'getKeys' | 'createKey' | 'createSuccess' | 'updateKey' | 'deleteKey';\n    apiKey?: ApiKeyDataInterface;\n}\n\nexport interface ApiKeysState {\n    apiKeys: ApiKeyDataInterface[];\n    dataLoaded: boolean;\n    modal: ApiKeyStateModal;\n    pageIndex: number;\n    nextPageExists: boolean;\n}\n\nexport const initialApiKeysState: ApiKeysState = {\n    apiKeys: [],\n    dataLoaded: false,\n    modal: {\n        active: false,\n    },\n    pageIndex: 0,\n    nextPageExists: false,\n};\n\nexport const apiKeysReducer = (state = initialApiKeysState, action: ApiKeysAction): ApiKeysState => {\n    switch (action.type) {\n        case API_KEYS_DATA:\n            return {\n                ...state,\n                apiKeys: sliceArray(action.payload.apiKeys, defaultStorageLimit()),\n                dataLoaded: true,\n                pageIndex: action.payload.pageIndex,\n                nextPageExists: action.payload.nextPageExists,\n            };\n        case API_KEY_CREATE:\n            return {\n                ...state,\n                apiKeys: state.apiKeys.concat(action.payload),\n            };\n        case API_KEY_UPDATE:\n            const apiKeyIndex = state.apiKeys.findIndex(e => e.kid === action.payload.kid);\n            const apiKeys = update(state.apiKeys, {\n                [apiKeyIndex]: {\n                    state: {$set: action.payload.state},\n                    updated_at: {$set: action.payload.updated_at},\n                },\n            });\n\n            return {\n                ...state,\n                apiKeys,\n            };\n        case API_KEY_DELETE:\n            return {\n                ...state,\n                apiKeys: state.apiKeys.filter(apiKey => apiKey.kid !== action.payload.kid),\n            };\n        case API_KEYS_2FA_MODAL:\n            return {\n                ...state,\n                modal: action.payload,\n            };\n        case API_KEYS_ERROR:\n            return initialApiKeysState;\n        default:\n            return state;\n    }\n};\n"]},"metadata":{},"sourceType":"module"}