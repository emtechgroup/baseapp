{"ast":null,"code":"import _classCallCheck from \"/Users/anthonypafundi/Desktop/baseapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/anthonypafundi/Desktop/baseapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/anthonypafundi/Desktop/baseapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/anthonypafundi/Desktop/baseapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/anthonypafundi/Desktop/baseapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/anthonypafundi/Desktop/baseapp/src/screens/OrdersTabScreen/index.tsx\";\nimport * as React from 'react';\nimport { FormattedMessage, injectIntl } from 'react-intl';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { TabPanel } from '../../components';\nimport { OrdersElement } from '../../containers/OrdersElement';\nimport { setDocumentTitle } from '../../helpers';\nimport { marketsFetch as _marketsFetch, ordersCancelAllFetch, resetOrdersHistory as _resetOrdersHistory, selectOrdersHistory, selectUserLoggedIn } from '../../modules';\nimport { rangerConnectFetch } from '../../modules/public/ranger';\nimport { selectRanger } from '../../modules/public/ranger/selectors';\n\nvar Orders = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(Orders, _React$PureComponent);\n\n  var _super = _createSuper(Orders);\n\n  function Orders() {\n    var _this;\n\n    _classCallCheck(this, Orders);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      tab: 'open',\n      currentTabIndex: 0\n    };\n    _this.tabMapping = ['open', 'all'];\n\n    _this.onCurrentTabChange = function (index) {\n      return _this.setState({\n        currentTabIndex: index\n      });\n    };\n\n    _this.handleMakeRequest = function (index) {\n      _this.renderTabs();\n\n      if (_this.state.tab === _this.tabMapping[index]) {\n        return;\n      }\n\n      _this.props.resetOrdersHistory();\n\n      _this.setState({\n        tab: _this.tabMapping[index]\n      });\n    };\n\n    _this.renderTabs = function () {\n      var tab = _this.state.tab;\n      return [{\n        content: tab === 'open' ? /*#__PURE__*/React.createElement(OrdersElement, {\n          type: \"open\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 43\n          }\n        }) : null,\n        label: _this.props.intl.formatMessage({\n          id: 'page.body.openOrders.tab.open'\n        })\n      }, {\n        content: tab === 'all' ? /*#__PURE__*/React.createElement(OrdersElement, {\n          type: \"all\",\n          __self: _assertThisInitialized(_this),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 42\n          }\n        }) : null,\n        label: _this.props.intl.formatMessage({\n          id: 'page.body.openOrders.tab.all'\n        })\n      }];\n    };\n\n    _this.handleCancelAll = function () {\n      return _this.props.ordersCancelAll();\n    };\n\n    return _this;\n  }\n\n  _createClass(Orders, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          connected = _this$props.rangerState.connected,\n          userLoggedIn = _this$props.userLoggedIn;\n      setDocumentTitle('Orders');\n      this.props.marketsFetch();\n\n      if (!connected) {\n        this.props.rangerConnect({\n          withAuth: userLoggedIn\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.props.resetOrdersHistory();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var cancelAll = this.props.list.length ? /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        onClick: this.handleCancelAll,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(FormattedMessage, {\n        id: \"page.body.openOrders.header.button.cancelAll\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"span\", {\n        className: \"pg-orders-tab__close\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 21\n        }\n      }))) : null;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pg-orders-tab pg-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pg-orders-tab__tabs-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(TabPanel, {\n        panels: this.renderTabs(),\n        onTabChange: this.handleMakeRequest,\n        optionalHead: cancelAll,\n        currentTabIndex: this.state.currentTabIndex,\n        onCurrentTabChange: this.onCurrentTabChange,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }\n      })));\n    }\n  }]);\n\n  return Orders;\n}(React.PureComponent);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    list: selectOrdersHistory(state),\n    rangerState: selectRanger(state),\n    userLoggedIn: selectUserLoggedIn(state)\n  };\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    marketsFetch: function marketsFetch() {\n      return dispatch(_marketsFetch());\n    },\n    ordersCancelAll: function ordersCancelAll() {\n      return dispatch(ordersCancelAllFetch());\n    },\n    resetOrdersHistory: function resetOrdersHistory() {\n      return dispatch(_resetOrdersHistory());\n    },\n    rangerConnect: function rangerConnect(payload) {\n      return dispatch(rangerConnectFetch(payload));\n    }\n  };\n};\n\nexport var OrdersTabScreen = compose(injectIntl, connect(mapStateToProps, mapDispatchToProps))(Orders);","map":{"version":3,"sources":["/Users/anthonypafundi/Desktop/baseapp/src/screens/OrdersTabScreen/index.tsx"],"names":["React","FormattedMessage","injectIntl","connect","compose","TabPanel","OrdersElement","setDocumentTitle","marketsFetch","ordersCancelAllFetch","resetOrdersHistory","selectOrdersHistory","selectUserLoggedIn","rangerConnectFetch","selectRanger","Orders","state","tab","currentTabIndex","tabMapping","onCurrentTabChange","index","setState","handleMakeRequest","renderTabs","props","content","label","intl","formatMessage","id","handleCancelAll","ordersCancelAll","connected","rangerState","userLoggedIn","rangerConnect","withAuth","cancelAll","list","length","PureComponent","mapStateToProps","mapDispatchToProps","dispatch","payload","OrdersTabScreen"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport {\n    FormattedMessage,\n    injectIntl,\n} from 'react-intl';\nimport { connect, MapDispatchToPropsFunction } from 'react-redux';\nimport { compose } from 'redux';\nimport { IntlProps } from '../../';\nimport { TabPanel } from '../../components';\nimport { OrdersElement } from '../../containers/OrdersElement';\nimport { setDocumentTitle } from '../../helpers';\nimport {\n    marketsFetch,\n    ordersCancelAllFetch,\n    resetOrdersHistory,\n    RootState,\n    selectOrdersHistory,\n    selectUserLoggedIn,\n} from '../../modules';\nimport {RangerConnectFetch, rangerConnectFetch} from '../../modules/public/ranger';\nimport {RangerState} from '../../modules/public/ranger/reducer';\nimport {selectRanger} from '../../modules/public/ranger/selectors';\nimport { OrderCommon } from '../../modules/types';\n\ninterface ReduxProps {\n    list: OrderCommon[];\n    rangerState: RangerState;\n    userLoggedIn: boolean;\n}\n\ninterface DispatchProps {\n    marketsFetch: typeof marketsFetch;\n    ordersCancelAll: typeof ordersCancelAllFetch;\n    resetOrdersHistory: typeof resetOrdersHistory;\n    rangerConnect: typeof rangerConnectFetch;\n}\n\ntype Props = ReduxProps & DispatchProps & IntlProps;\n\ninterface State {\n    tab: string;\n    currentTabIndex: number;\n}\n\nclass Orders extends React.PureComponent<Props, State> {\n    public state = { tab: 'open', currentTabIndex: 0};\n\n    public tabMapping = ['open', 'all'];\n\n    public componentDidMount() {\n        const {\n            rangerState: {connected},\n            userLoggedIn,\n        } = this.props;\n\n        setDocumentTitle('Orders');\n        this.props.marketsFetch();\n\n        if (!connected) {\n            this.props.rangerConnect({withAuth: userLoggedIn});\n        }\n    }\n\n    public componentWillUnmount() {\n        this.props.resetOrdersHistory();\n    }\n\n    public render() {\n        const cancelAll = this.props.list.length ? (\n            <React.Fragment>\n                <span onClick={this.handleCancelAll}>\n                    <FormattedMessage id=\"page.body.openOrders.header.button.cancelAll\" />\n                    <span className=\"pg-orders-tab__close\" />\n                </span>\n            </React.Fragment>\n        ) : null;\n\n        return (\n            <div className=\"pg-orders-tab pg-container\">\n                <div className=\"pg-orders-tab__tabs-content\">\n                    <TabPanel\n                        panels={this.renderTabs()}\n                        onTabChange={this.handleMakeRequest}\n                        optionalHead={cancelAll}\n                        currentTabIndex={this.state.currentTabIndex}\n                        onCurrentTabChange={this.onCurrentTabChange}\n                    />\n                </div>\n            </div>\n        );\n    }\n\n    private onCurrentTabChange = index => this.setState({ currentTabIndex: index });\n\n    private handleMakeRequest = (index: number) => {\n        this.renderTabs();\n        if (this.state.tab === this.tabMapping[index]) {\n            return;\n        }\n        this.props.resetOrdersHistory();\n        this.setState({ tab: this.tabMapping[index] });\n    };\n\n    private renderTabs = () => {\n        const { tab } = this.state;\n\n        return [\n            {\n                content: tab === 'open' ? <OrdersElement type=\"open\"/> : null,\n                label: this.props.intl.formatMessage({ id: 'page.body.openOrders.tab.open'}),\n            },\n            {\n                content: tab === 'all' ? <OrdersElement type=\"all\" /> : null,\n                label: this.props.intl.formatMessage({ id: 'page.body.openOrders.tab.all'}),\n            },\n        ];\n    };\n\n    private handleCancelAll = () => this.props.ordersCancelAll();\n}\n\nconst mapStateToProps = (state: RootState): ReduxProps => ({\n    list: selectOrdersHistory(state),\n    rangerState: selectRanger(state),\n    userLoggedIn: selectUserLoggedIn(state),\n});\n\nconst mapDispatchToProps: MapDispatchToPropsFunction<DispatchProps, {}> =\n    dispatch => ({\n        marketsFetch: () => dispatch(marketsFetch()),\n        ordersCancelAll: () => dispatch(ordersCancelAllFetch()),\n        resetOrdersHistory: () => dispatch(resetOrdersHistory()),\n        rangerConnect: (payload: RangerConnectFetch['payload']) => dispatch(rangerConnectFetch(payload)),\n    });\n\nexport const OrdersTabScreen = compose(\n    injectIntl,\n    connect(mapStateToProps, mapDispatchToProps),\n)(Orders) as React.ComponentClass;\n"]},"metadata":{},"sourceType":"module"}