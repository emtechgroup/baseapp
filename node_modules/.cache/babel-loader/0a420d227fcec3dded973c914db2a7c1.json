{"ast":null,"code":"import _createForOfIteratorHelper from \"/Users/anthonypafundi/Desktop/baseapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport _toConsumableArray from \"/Users/anthonypafundi/Desktop/baseapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { isFinexEnabled } from '../../../api';\nimport { DEFAULT_TRADING_VIEW_INTERVAL } from '../../../constants';\nimport { marketStreams } from './actions';\nexport var generateSocketURI = function generateSocketURI(baseUrl, s) {\n  return \"\".concat(baseUrl, \"/?stream=\").concat(s.sort().join('&stream='));\n};\nexport var formatTicker = function formatTicker(events) {\n  var tickers = {};\n\n  for (var market in events) {\n    if (events.hasOwnProperty(market)) {\n      var event = events[market];\n      var amount = event.amount,\n          avg_price = event.avg_price,\n          high = event.high,\n          last = event.last,\n          low = event.low,\n          open = event.open,\n          price_change_percent = event.price_change_percent,\n          volume = event.volume;\n      tickers[market] = {\n        amount,\n        avg_price,\n        high,\n        last,\n        low,\n        open,\n        price_change_percent,\n        volume\n      };\n    }\n  }\n\n  return tickers;\n};\nexport var streamsBuilder = function streamsBuilder(withAuth, prevSubscriptions, market) {\n  var streams = ['global.tickers'];\n\n  if (withAuth) {\n    streams = [].concat(_toConsumableArray(streams), ['order', 'trade', 'deposit_address']);\n\n    if (isFinexEnabled()) {\n      streams = [].concat(_toConsumableArray(streams), ['balances']);\n    }\n  }\n\n  if (market) {\n    streams = [].concat(_toConsumableArray(streams), _toConsumableArray(marketStreams(market).channels));\n  }\n\n  var _iterator = _createForOfIteratorHelper(prevSubscriptions),\n      _step;\n\n  try {\n    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n      var stream = _step.value;\n\n      if (streams.indexOf(stream) < 0) {\n        streams.push(stream);\n      }\n    }\n  } catch (err) {\n    _iterator.e(err);\n  } finally {\n    _iterator.f();\n  }\n\n  return streams;\n};\nexport var periodsMapNumber = {\n  '1m': 1,\n  '5m': 5,\n  '15m': 15,\n  '30m': 30,\n  '1h': 60,\n  '2h': 120,\n  '4h': 240,\n  '6h': 360,\n  '12h': 720,\n  '1d': 1440,\n  '3d': 4320,\n  '1w': 10080\n};\nexport var periodsMapString = {\n  1: '1m',\n  5: '5m',\n  15: '15m',\n  30: '30m',\n  60: '1h',\n  120: '2h',\n  240: '4h',\n  360: '6h',\n  720: '12h',\n  1440: '1d',\n  4320: '3d',\n  10080: '1w'\n};\nexport var periodStringToMinutes = function periodStringToMinutes(period) {\n  return periodsMapNumber[period] || +DEFAULT_TRADING_VIEW_INTERVAL;\n};\nexport var periodMinutesToString = function periodMinutesToString(period) {\n  return periodsMapString[period] || periodsMapString[+DEFAULT_TRADING_VIEW_INTERVAL];\n};\nexport var marketKlineStreams = function marketKlineStreams(marketId, periodString) {\n  return {\n    channels: [\"\".concat(marketId, \".kline-\").concat(periodString)]\n  };\n};","map":{"version":3,"sources":["/Users/anthonypafundi/Desktop/baseapp/src/modules/public/ranger/helpers.ts"],"names":["isFinexEnabled","DEFAULT_TRADING_VIEW_INTERVAL","marketStreams","generateSocketURI","baseUrl","s","sort","join","formatTicker","events","tickers","market","hasOwnProperty","event","amount","avg_price","high","last","low","open","price_change_percent","volume","streamsBuilder","withAuth","prevSubscriptions","streams","channels","stream","indexOf","push","periodsMapNumber","periodsMapString","periodStringToMinutes","period","periodMinutesToString","marketKlineStreams","marketId","periodString"],"mappings":"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","sourcesContent":["import { isFinexEnabled } from '../../../api';\nimport { DEFAULT_TRADING_VIEW_INTERVAL } from '../../../constants';\nimport { Market, Ticker, TickerEvent } from '../markets';\nimport { marketStreams } from './actions';\n\nexport const generateSocketURI = (baseUrl: string, s: string[]) => `${baseUrl}/?stream=${s.sort().join('&stream=')}`;\n\nexport const formatTicker = (events: { [pair: string]: TickerEvent }): { [pair: string]: Ticker } => {\n    const tickers = {};\n    for (const market in events) {\n        if (events.hasOwnProperty(market)) {\n            const event: TickerEvent = events[market];\n            const {\n                amount,\n                avg_price,\n                high,\n                last,\n                low,\n                open,\n                price_change_percent,\n                volume,\n            } = event;\n            tickers[market] = {\n                amount,\n                avg_price,\n                high,\n                last,\n                low,\n                open,\n                price_change_percent,\n                volume,\n            };\n        }\n    }\n\n    return tickers;\n};\n\nexport const streamsBuilder = (withAuth: boolean, prevSubscriptions: string[], market: Market | undefined) => {\n    let streams: string[] = ['global.tickers'];\n\n    if (withAuth) {\n        streams = [\n            ...streams,\n            'order',\n            'trade',\n            'deposit_address',\n        ];\n\n        if (isFinexEnabled()) {\n            streams = [\n                ...streams,\n                'balances',\n            ];\n        }\n    }\n    if (market) {\n        streams = [\n            ...streams,\n            ...(marketStreams(market).channels),\n        ];\n    }\n    for (const stream of prevSubscriptions) {\n        if (streams.indexOf(stream) < 0) {\n            streams.push(stream);\n        }\n    }\n\n    return streams;\n};\n\nexport const periodsMapNumber: { [pair: string]: number } = {\n    '1m': 1,\n    '5m': 5,\n    '15m': 15,\n    '30m': 30,\n    '1h': 60,\n    '2h': 120,\n    '4h': 240,\n    '6h': 360,\n    '12h': 720,\n    '1d': 1440,\n    '3d': 4320,\n    '1w': 10080,\n};\n\nexport const periodsMapString: { [pair: number]: string } = {\n    1: '1m',\n    5: '5m',\n    15: '15m',\n    30: '30m',\n    60: '1h',\n    120: '2h',\n    240: '4h',\n    360: '6h',\n    720: '12h',\n    1440: '1d',\n    4320: '3d',\n    10080: '1w',\n};\n\nexport const periodStringToMinutes = (period: string): number => periodsMapNumber[period] || +DEFAULT_TRADING_VIEW_INTERVAL;\nexport const periodMinutesToString = (period: number): string => periodsMapString[period] || periodsMapString[+DEFAULT_TRADING_VIEW_INTERVAL];\n\nexport const marketKlineStreams = (marketId: string, periodString: string) => ({\n    channels: [\n        `${marketId}.kline-${periodString}`,\n    ],\n});\n"]},"metadata":{},"sourceType":"module"}