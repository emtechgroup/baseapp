{"ast":null,"code":"/* eslint-disable */\nvar document = window.document;\nvar Math = window.Math;\nvar head = document.getElementsByTagName(\"head\")[0];\n\nfunction _Object(obj) {\n  this._obj = obj;\n}\n\n_Object.prototype = {\n  _each: function _each(process) {\n    var _obj = this._obj;\n\n    for (var k in _obj) {\n      if (_obj.hasOwnProperty(k)) {\n        process(k, _obj[k]);\n      }\n    }\n\n    return this;\n  }\n};\n\nfunction Config(config) {\n  var self = this;\n\n  new _Object(config)._each(function (key, value) {\n    self[key] = value;\n  });\n}\n\nConfig.prototype = {\n  api_server: 'api.geetest.com',\n  protocol: 'http://',\n  typePath: '/gettype.php',\n  fallback_config: {\n    slide: {\n      static_servers: [\"static.geetest.com\", \"dn-staticdown.qbox.me\"],\n      type: 'slide',\n      slide: '/static/js/geetest.0.0.0.js'\n    },\n    fullpage: {\n      static_servers: [\"static.geetest.com\", \"dn-staticdown.qbox.me\"],\n      type: 'fullpage',\n      fullpage: '/static/js/fullpage.0.0.0.js'\n    }\n  },\n  _get_fallback_config: function _get_fallback_config() {\n    var self = this;\n\n    if (isString(self.type)) {\n      return self.fallback_config[self.type];\n    } else if (self.new_captcha) {\n      return self.fallback_config.fullpage;\n    } else {\n      return self.fallback_config.slide;\n    }\n  },\n  _extend: function _extend(obj) {\n    var self = this;\n\n    new _Object(obj)._each(function (key, value) {\n      self[key] = value;\n    });\n  }\n};\n\nvar isNumber = function isNumber(value) {\n  return typeof value === 'number';\n};\n\nvar isString = function isString(value) {\n  return typeof value === 'string';\n};\n\nvar isBoolean = function isBoolean(value) {\n  return typeof value === 'boolean';\n};\n\nvar isObject = function isObject(value) {\n  return typeof value === 'object' && value !== null;\n};\n\nvar isFunction = function isFunction(value) {\n  return typeof value === 'function';\n};\n\nvar callbacks = {};\nvar status = {};\n\nvar random = function random() {\n  return parseInt(Math.random() * 10000) + new Date().valueOf();\n};\n\nvar loadScript = function loadScript(url, cb) {\n  var script = document.createElement(\"script\");\n  script.charset = \"UTF-8\";\n  script.async = true;\n\n  script.onerror = function () {\n    cb(true);\n  };\n\n  var loaded = false;\n\n  script.onload = script.onreadystatechange = function () {\n    if (!loaded && (!script.readyState || \"loaded\" === script.readyState || \"complete\" === script.readyState)) {\n      loaded = true;\n      setTimeout(function () {\n        cb(false);\n      }, 0);\n    }\n  };\n\n  script.src = url;\n  head.appendChild(script);\n};\n\nvar normalizeDomain = function normalizeDomain(domain) {\n  return domain.replace(/^https?:\\/\\/|\\/$/g, ''); // uems.sysu.edu.cn/jwxt/geetest\n};\n\nvar normalizePath = function normalizePath(path) {\n  path = path.replace(/\\/+/g, '/');\n\n  if (path.indexOf('/') !== 0) {\n    path = '/' + path;\n  }\n\n  return path;\n};\n\nvar normalizeQuery = function normalizeQuery(query) {\n  if (!query) {\n    return '';\n  }\n\n  var q = '?';\n\n  new _Object(query)._each(function (key, value) {\n    if (isString(value) || isNumber(value) || isBoolean(value)) {\n      q = q + encodeURIComponent(key) + '=' + encodeURIComponent(value) + '&';\n    }\n  });\n\n  if (q === '?') {\n    q = '';\n  }\n\n  return q.replace(/&$/, '');\n};\n\nvar makeURL = function makeURL(protocol, domain, path, query) {\n  domain = normalizeDomain(domain);\n  var url = normalizePath(path) + normalizeQuery(query);\n\n  if (domain) {\n    url = protocol + domain + url;\n  }\n\n  return url;\n};\n\nvar load = function load(protocol, domains, path, query, cb) {\n  var tryRequest = function tryRequest(at) {\n    var url = makeURL(protocol, domains[at], path, query);\n    loadScript(url, function (err) {\n      if (err) {\n        if (at >= domains.length - 1) {\n          cb(true);\n        } else {\n          tryRequest(at + 1);\n        }\n      } else {\n        cb(false);\n      }\n    });\n  };\n\n  tryRequest(0);\n};\n\nvar jsonp = function jsonp(domains, path, config, callback) {\n  if (isObject(config.getLib)) {\n    config._extend(config.getLib);\n\n    callback(config);\n    return;\n  }\n\n  if (config.offline) {\n    callback(config._get_fallback_config());\n    return;\n  }\n\n  var cb = \"geetest_\" + random();\n\n  window[cb] = function (data) {\n    if (data.status == 'success') {\n      callback(data.data);\n    } else if (!data.status) {\n      callback(data);\n    } else {\n      callback(config._get_fallback_config());\n    }\n\n    window[cb] = undefined;\n\n    try {\n      delete window[cb];\n    } catch (e) {}\n  };\n\n  load(config.protocol, domains, path, {\n    gt: config.gt,\n    callback: cb\n  }, function (err) {\n    if (err) {\n      callback(config._get_fallback_config());\n    }\n  });\n};\n\nvar throwError = function throwError(errorType, config) {\n  var errors = {\n    networkError: '网络错误',\n    gtTypeError: 'gt字段不是字符串类型'\n  };\n\n  if (typeof config.onError === 'function') {\n    config.onError(errors[errorType]);\n  } else {\n    throw new Error(errors[errorType]);\n  }\n};\n\nvar detect = function detect() {\n  return window.Geetest || document.getElementById(\"gt_lib\");\n};\n\nif (detect()) {\n  status.slide = \"loaded\";\n}\n\nexport function initGeetest(userConfig, callback) {\n  var config = new Config(userConfig);\n\n  if (userConfig.https) {\n    config.protocol = 'https://';\n  } else if (!userConfig.protocol) {\n    config.protocol = window.location.protocol + '//';\n  } // for KYC\n\n\n  if (userConfig.gt === '050cffef4ae57b5d5e529fea9540b0d1' || userConfig.gt === '3bd38408ae4af923ed36e13819b14d42') {\n    config.apiserver = 'yumchina.geetest.com/'; // for old js\n\n    config.api_server = 'yumchina.geetest.com';\n  }\n\n  if (isObject(userConfig.getType)) {\n    config._extend(userConfig.getType);\n  }\n\n  jsonp([config.api_server || config.apiserver], config.typePath, config, function (newConfig) {\n    var type = newConfig.type;\n\n    var init = function init() {\n      config._extend(newConfig);\n\n      callback(new window.Geetest(config));\n    };\n\n    callbacks[type] = callbacks[type] || [];\n    var s = status[type] || 'init';\n\n    if (s === 'init') {\n      status[type] = 'loading';\n      callbacks[type].push(init);\n      load(config.protocol, newConfig.static_servers || newConfig.domains, newConfig[type] || newConfig.path, null, function (err) {\n        if (err) {\n          status[type] = 'fail';\n          throwError('networkError', config);\n        } else {\n          status[type] = 'loaded';\n          var cbs = callbacks[type];\n\n          for (var i = 0, len = cbs.length; i < len; i = i + 1) {\n            var cb = cbs[i];\n\n            if (isFunction(cb)) {\n              cb();\n            }\n          }\n\n          callbacks[type] = [];\n        }\n      });\n    } else if (s === \"loaded\") {\n      init();\n    } else if (s === \"fail\") {\n      throwError('networkError', config);\n    } else if (s === \"loading\") {\n      callbacks[type].push(init);\n    }\n  });\n}\n;","map":{"version":3,"sources":["/Users/anthonypafundi/Desktop/baseapp/src/helpers/geetest.js"],"names":["document","window","Math","head","getElementsByTagName","_Object","obj","_obj","prototype","_each","process","k","hasOwnProperty","Config","config","self","key","value","api_server","protocol","typePath","fallback_config","slide","static_servers","type","fullpage","_get_fallback_config","isString","new_captcha","_extend","isNumber","isBoolean","isObject","isFunction","callbacks","status","random","parseInt","Date","valueOf","loadScript","url","cb","script","createElement","charset","async","onerror","loaded","onload","onreadystatechange","readyState","setTimeout","src","appendChild","normalizeDomain","domain","replace","normalizePath","path","indexOf","normalizeQuery","query","q","encodeURIComponent","makeURL","load","domains","tryRequest","at","err","length","jsonp","callback","getLib","offline","data","undefined","e","gt","throwError","errorType","errors","networkError","gtTypeError","onError","Error","detect","Geetest","getElementById","initGeetest","userConfig","https","location","apiserver","getType","newConfig","init","s","push","cbs","i","len"],"mappings":"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","sourcesContent":["/* eslint-disable */\nvar document = window.document;\nvar Math = window.Math;\nvar head = document.getElementsByTagName(\"head\")[0];\n\nfunction _Object(obj) {\n    this._obj = obj;\n}\n\n_Object.prototype = {\n    _each: function (process) {\n        var _obj = this._obj;\n        for (var k in _obj) {\n            if (_obj.hasOwnProperty(k)) {\n                process(k, _obj[k]);\n            }\n        }\n        return this;\n    }\n};\n\nfunction Config(config) {\n    var self = this;\n    new _Object(config)._each(function (key, value) {\n        self[key] = value;\n    });\n}\n\nConfig.prototype = {\n    api_server: 'api.geetest.com',\n    protocol: 'http://',\n    typePath: '/gettype.php',\n    fallback_config: {\n        slide: {\n            static_servers: [\"static.geetest.com\", \"dn-staticdown.qbox.me\"],\n            type: 'slide',\n            slide: '/static/js/geetest.0.0.0.js'\n        },\n        fullpage: {\n            static_servers: [\"static.geetest.com\", \"dn-staticdown.qbox.me\"],\n            type: 'fullpage',\n            fullpage: '/static/js/fullpage.0.0.0.js'\n        }\n    },\n    _get_fallback_config: function () {\n        var self = this;\n        if (isString(self.type)) {\n            return self.fallback_config[self.type];\n        } else if (self.new_captcha) {\n            return self.fallback_config.fullpage;\n        } else {\n            return self.fallback_config.slide;\n        }\n    },\n    _extend: function (obj) {\n        var self = this;\n        new _Object(obj)._each(function (key, value) {\n            self[key] = value;\n        })\n    }\n};\nvar isNumber = function (value) {\n    return (typeof value === 'number');\n};\nvar isString = function (value) {\n    return (typeof value === 'string');\n};\nvar isBoolean = function (value) {\n    return (typeof value === 'boolean');\n};\nvar isObject = function (value) {\n    return (typeof value === 'object' && value !== null);\n};\nvar isFunction = function (value) {\n    return (typeof value === 'function');\n};\n\nvar callbacks = {};\nvar status = {};\n\nvar random = function () {\n    return parseInt(Math.random() * 10000) + (new Date()).valueOf();\n};\n\nvar loadScript = function (url, cb) {\n    var script = document.createElement(\"script\");\n    script.charset = \"UTF-8\";\n    script.async = true;\n\n    script.onerror = function () {\n        cb(true);\n    };\n    var loaded = false;\n    script.onload = script.onreadystatechange = function () {\n        if (!loaded &&\n            (!script.readyState ||\n            \"loaded\" === script.readyState ||\n            \"complete\" === script.readyState)) {\n\n            loaded = true;\n            setTimeout(function () {\n                cb(false);\n            }, 0);\n        }\n    };\n    script.src = url;\n    head.appendChild(script);\n};\n\nvar normalizeDomain = function (domain) {\n    return domain.replace(/^https?:\\/\\/|\\/$/g, ''); // uems.sysu.edu.cn/jwxt/geetest\n};\nvar normalizePath = function (path) {\n    path = path.replace(/\\/+/g, '/');\n    if (path.indexOf('/') !== 0) {\n        path = '/' + path;\n    }\n    return path;\n};\nvar normalizeQuery = function (query) {\n    if (!query) {\n        return '';\n    }\n    var q = '?';\n    new _Object(query)._each(function (key, value) {\n        if (isString(value) || isNumber(value) || isBoolean(value)) {\n            q = q + encodeURIComponent(key) + '=' + encodeURIComponent(value) + '&';\n        }\n    });\n    if (q === '?') {\n        q = '';\n    }\n    return q.replace(/&$/, '');\n};\nvar makeURL = function (protocol, domain, path, query) {\n    domain = normalizeDomain(domain);\n\n    var url = normalizePath(path) + normalizeQuery(query);\n    if (domain) {\n        url = protocol + domain + url;\n    }\n\n    return url;\n};\n\nvar load = function (protocol, domains, path, query, cb) {\n    var tryRequest = function (at) {\n\n        var url = makeURL(protocol, domains[at], path, query);\n        loadScript(url, function (err) {\n            if (err) {\n                if (at >= domains.length - 1) {\n                    cb(true);\n                } else {\n                    tryRequest(at + 1);\n                }\n            } else {\n                cb(false);\n            }\n        });\n    };\n    tryRequest(0);\n};\n\n\nvar jsonp = function (domains, path, config, callback) {\n    if (isObject(config.getLib)) {\n        config._extend(config.getLib);\n        callback(config);\n        return;\n    }\n    if (config.offline) {\n        callback(config._get_fallback_config());\n        return;\n    }\n\n    var cb = \"geetest_\" + random();\n    window[cb] = function (data) {\n        if (data.status == 'success') {\n            callback(data.data);\n        } else if (!data.status) {\n            callback(data);\n        } else {\n            callback(config._get_fallback_config());\n        }\n        window[cb] = undefined;\n        try {\n            delete window[cb];\n        } catch (e) {\n        }\n    };\n    load(config.protocol, domains, path, {\n        gt: config.gt,\n        callback: cb\n    }, function (err) {\n        if (err) {\n            callback(config._get_fallback_config());\n        }\n    });\n};\n\nvar throwError = function (errorType, config) {\n    var errors = {\n        networkError: '网络错误',\n        gtTypeError: 'gt字段不是字符串类型'\n    };\n    if (typeof config.onError === 'function') {\n        config.onError(errors[errorType]);\n    } else {\n        throw new Error(errors[errorType]);\n    }\n};\n\nvar detect = function () {\n    return window.Geetest || document.getElementById(\"gt_lib\");\n};\n\nif (detect()) {\n    status.slide = \"loaded\";\n}\n\nexport function initGeetest(userConfig, callback) {\n\n    var config = new Config(userConfig);\n\n    if (userConfig.https) {\n        config.protocol = 'https://';\n    } else if (!userConfig.protocol) {\n        config.protocol = window.location.protocol + '//';\n    }\n\n    // for KYC\n    if (userConfig.gt === '050cffef4ae57b5d5e529fea9540b0d1' ||\n        userConfig.gt === '3bd38408ae4af923ed36e13819b14d42') {\n        config.apiserver = 'yumchina.geetest.com/'; // for old js\n        config.api_server = 'yumchina.geetest.com';\n    }\n\n    if (isObject(userConfig.getType)) {\n        config._extend(userConfig.getType);\n    }\n    jsonp([config.api_server || config.apiserver], config.typePath, config, function (newConfig) {\n        var type = newConfig.type;\n        var init = function () {\n            config._extend(newConfig);\n            callback(new window.Geetest(config));\n        };\n\n        callbacks[type] = callbacks[type] || [];\n        var s = status[type] || 'init';\n        if (s === 'init') {\n            status[type] = 'loading';\n\n            callbacks[type].push(init);\n\n            load(config.protocol, newConfig.static_servers || newConfig.domains, newConfig[type] || newConfig.path, null, function (err) {\n                if (err) {\n                    status[type] = 'fail';\n                    throwError('networkError', config);\n                } else {\n                    status[type] = 'loaded';\n                    var cbs = callbacks[type];\n                    for (var i = 0, len = cbs.length; i < len; i = i + 1) {\n                        var cb = cbs[i];\n                        if (isFunction(cb)) {\n                            cb();\n                        }\n                    }\n                    callbacks[type] = [];\n                }\n            });\n        } else if (s === \"loaded\") {\n            init();\n        } else if (s === \"fail\") {\n            throwError('networkError', config);\n        } else if (s === \"loading\") {\n            callbacks[type].push(init);\n        }\n    });\n\n};\n"]},"metadata":{},"sourceType":"module"}