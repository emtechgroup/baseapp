{"ast":null,"code":"import _toConsumableArray from \"/Users/anthonypafundi/Desktop/baseapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/anthonypafundi/Desktop/baseapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/anthonypafundi/Desktop/baseapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/Users/anthonypafundi/Desktop/baseapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/Users/anthonypafundi/Desktop/baseapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/Users/anthonypafundi/Desktop/baseapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/Users/anthonypafundi/Desktop/baseapp/src/containers/HistoryElement/index.tsx\";\nimport * as React from 'react';\nimport { Spinner } from 'react-bootstrap';\nimport { injectIntl } from 'react-intl';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\nimport { Decimal, History, Pagination } from '../../components';\nimport { localeDate, setDepositStatusColor, setTradesType, setWithdrawStatusColor, truncateMiddle } from '../../helpers';\nimport { currenciesFetch, fetchHistory as _fetchHistory, selectCurrencies, selectCurrentPage, selectFirstElemIndex, selectHistory, selectHistoryLoading, selectLastElemIndex, selectMarkets, selectNextPageExists, selectWallets } from '../../modules';\n\nvar HistoryComponent = /*#__PURE__*/function (_React$Component) {\n  _inherits(HistoryComponent, _React$Component);\n\n  var _super = _createSuper(HistoryComponent);\n\n  function HistoryComponent() {\n    var _this;\n\n    _classCallCheck(this, HistoryComponent);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _this.renderContent = function () {\n      var _this$props = _this.props,\n          type = _this$props.type,\n          firstElemIndex = _this$props.firstElemIndex,\n          lastElemIndex = _this$props.lastElemIndex,\n          page = _this$props.page,\n          nextPageExists = _this$props.nextPageExists;\n      return /*#__PURE__*/React.createElement(React.Fragment, {\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(History, {\n        headers: _this.renderHeaders(type),\n        data: _this.retrieveData(),\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 17\n        }\n      }), /*#__PURE__*/React.createElement(Pagination, {\n        firstElemIndex: firstElemIndex,\n        lastElemIndex: lastElemIndex,\n        page: page,\n        nextPageExists: nextPageExists,\n        onClickPrevPage: _this.onClickPrevPage,\n        onClickNextPage: _this.onClickNextPage,\n        __self: _assertThisInitialized(_this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }\n      }));\n    };\n\n    _this.onClickPrevPage = function () {\n      var _this$props2 = _this.props,\n          page = _this$props2.page,\n          type = _this$props2.type;\n\n      _this.props.fetchHistory({\n        page: Number(page) - 1,\n        type,\n        limit: 25\n      });\n    };\n\n    _this.onClickNextPage = function () {\n      var _this$props3 = _this.props,\n          page = _this$props3.page,\n          type = _this$props3.type;\n\n      _this.props.fetchHistory({\n        page: Number(page) + 1,\n        type,\n        limit: 25\n      });\n    };\n\n    _this.renderHeaders = function (type) {\n      switch (type) {\n        case 'deposits':\n          return [_this.props.intl.formatMessage({\n            id: 'page.body.history.deposit.header.txid'\n          }), _this.props.intl.formatMessage({\n            id: 'page.body.history.deposit.header.date'\n          }), _this.props.intl.formatMessage({\n            id: 'page.body.history.deposit.header.currency'\n          }), _this.props.intl.formatMessage({\n            id: 'page.body.history.deposit.header.amount'\n          }), _this.props.intl.formatMessage({\n            id: 'page.body.history.deposit.header.status'\n          })];\n\n        case 'withdraws':\n          return [_this.props.intl.formatMessage({\n            id: 'page.body.history.withdraw.header.address'\n          }), _this.props.intl.formatMessage({\n            id: 'page.body.history.withdraw.header.date'\n          }), _this.props.intl.formatMessage({\n            id: 'page.body.history.withdraw.header.currency'\n          }), _this.props.intl.formatMessage({\n            id: 'page.body.history.withdraw.header.amount'\n          }), _this.props.intl.formatMessage({\n            id: 'page.body.history.withdraw.header.fee'\n          }), _this.props.intl.formatMessage({\n            id: 'page.body.history.withdraw.header.status'\n          })];\n\n        case 'trades':\n          return [_this.props.intl.formatMessage({\n            id: 'page.body.history.trade.header.date'\n          }), _this.props.intl.formatMessage({\n            id: 'page.body.history.trade.header.side'\n          }), _this.props.intl.formatMessage({\n            id: 'page.body.history.trade.header.market'\n          }), _this.props.intl.formatMessage({\n            id: 'page.body.history.trade.header.price'\n          }), _this.props.intl.formatMessage({\n            id: 'page.body.history.trade.header.amount'\n          }), _this.props.intl.formatMessage({\n            id: 'page.body.history.trade.header.total'\n          })];\n\n        default:\n          return [];\n      }\n    };\n\n    _this.retrieveData = function () {\n      var _this$props4 = _this.props,\n          type = _this$props4.type,\n          list = _this$props4.list;\n      return _toConsumableArray(list).map(function (item) {\n        return _this.renderTableRow(type, item);\n      });\n    };\n\n    _this.renderTableRow = function (type, item) {\n      var _this$props5 = _this.props,\n          currencies = _this$props5.currencies,\n          intl = _this$props5.intl,\n          marketsData = _this$props5.marketsData,\n          wallets = _this$props5.wallets;\n\n      switch (type) {\n        case 'deposits':\n          {\n            var amount = item.amount,\n                confirmations = item.confirmations,\n                created_at = item.created_at,\n                currency = item.currency,\n                txid = item.txid;\n\n            var blockchainLink = _this.getBlockchainLink(currency, txid);\n\n            var wallet = wallets.find(function (obj) {\n              return obj.currency === currency;\n            });\n            var itemCurrency = currencies && currencies.find(function (cur) {\n              return cur.id === currency;\n            });\n            var minConfirmations = itemCurrency && itemCurrency.min_confirmations;\n            var state = item.state === 'submitted' && confirmations !== undefined && minConfirmations !== undefined ? \"\".concat(confirmations, \"/\").concat(minConfirmations) : intl.formatMessage({\n              id: \"page.body.history.deposit.content.status.\".concat(item.state)\n            });\n            return [/*#__PURE__*/React.createElement(\"div\", {\n              className: \"pg-history-elem__hide\",\n              key: txid,\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 21\n              }\n            }, /*#__PURE__*/React.createElement(\"a\", {\n              href: blockchainLink,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 25\n              }\n            }, truncateMiddle(txid, 30))), localeDate(created_at, 'fullDate'), currency && currency.toUpperCase(), wallet && Decimal.format(amount, wallet.fixed, ','), /*#__PURE__*/React.createElement(\"span\", {\n              style: {\n                color: setDepositStatusColor(item.state)\n              },\n              key: txid,\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 187,\n                columnNumber: 21\n              }\n            }, state)];\n          }\n\n        case 'withdraws':\n          {\n            var _txid = item.txid,\n                _created_at = item.created_at,\n                _currency = item.currency,\n                _amount = item.amount,\n                fee = item.fee,\n                rid = item.rid;\n\n            var _state = intl.formatMessage({\n              id: \"page.body.history.withdraw.content.status.\".concat(item.state)\n            });\n\n            var _blockchainLink = _this.getBlockchainLink(_currency, _txid, rid);\n\n            var _wallet = wallets.find(function (obj) {\n              return obj.currency === _currency;\n            });\n\n            return [/*#__PURE__*/React.createElement(\"div\", {\n              className: \"pg-history-elem__hide\",\n              key: _txid || rid,\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 21\n              }\n            }, /*#__PURE__*/React.createElement(\"a\", {\n              href: _blockchainLink,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 25\n              }\n            }, truncateMiddle(_txid || rid, 30))), localeDate(_created_at, 'fullDate'), _currency && _currency.toUpperCase(), _wallet && Decimal.format(_amount, _wallet.fixed, ','), _wallet && Decimal.format(fee, _wallet.fixed, ','), /*#__PURE__*/React.createElement(\"span\", {\n              style: {\n                color: setWithdrawStatusColor(item.state)\n              },\n              key: _txid || rid,\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 21\n              }\n            }, _state)];\n          }\n\n        case 'trades':\n          {\n            var id = item.id,\n                _created_at2 = item.created_at,\n                side = item.side,\n                market = item.market,\n                price = item.price,\n                _amount2 = item.amount,\n                total = item.total;\n            var marketToDisplay = marketsData.find(function (m) {\n              return m.id === market;\n            }) || {\n              name: '',\n              price_precision: 0,\n              amount_precision: 0\n            };\n            var marketName = marketToDisplay ? marketToDisplay.name : market;\n            var sideText = setTradesType(side).text.toLowerCase() ? intl.formatMessage({\n              id: \"page.body.history.trade.content.side.\".concat(setTradesType(side).text.toLowerCase())\n            }) : '';\n            return [localeDate(_created_at2, 'fullDate'), /*#__PURE__*/React.createElement(\"span\", {\n              style: {\n                color: setTradesType(side).color\n              },\n              key: id,\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 218,\n                columnNumber: 21\n              }\n            }, sideText), marketName, /*#__PURE__*/React.createElement(Decimal, {\n              key: id,\n              fixed: marketToDisplay.price_precision,\n              thousSep: \",\",\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 21\n              }\n            }, price), /*#__PURE__*/React.createElement(Decimal, {\n              key: id,\n              fixed: marketToDisplay.amount_precision,\n              thousSep: \",\",\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 221,\n                columnNumber: 21\n              }\n            }, _amount2), /*#__PURE__*/React.createElement(Decimal, {\n              key: id,\n              fixed: marketToDisplay.amount_precision,\n              thousSep: \",\",\n              __self: _assertThisInitialized(_this),\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 222,\n                columnNumber: 21\n              }\n            }, total)];\n          }\n\n        default:\n          {\n            return [];\n          }\n      }\n    };\n\n    _this.getBlockchainLink = function (currency, txid, rid) {\n      var wallets = _this.props.wallets;\n      var currencyInfo = wallets && wallets.find(function (wallet) {\n        return wallet.currency === currency;\n      });\n\n      if (currencyInfo) {\n        if (txid && currencyInfo.explorerTransaction) {\n          return currencyInfo.explorerTransaction.replace('#{txid}', txid);\n        }\n\n        if (rid && currencyInfo.explorerAddress) {\n          return currencyInfo.explorerAddress.replace('#{address}', rid);\n        }\n      }\n\n      return '';\n    };\n\n    return _this;\n  }\n\n  _createClass(HistoryComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props6 = this.props,\n          currencies = _this$props6.currencies,\n          type = _this$props6.type;\n      this.props.fetchHistory({\n        page: 0,\n        type,\n        limit: 25\n      });\n\n      if (currencies.length === 0) {\n        this.props.fetchCurrencies();\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var currencies = this.props.currencies;\n\n      if (!currencies.length && nextProps.currencies.length) {\n        this.props.fetchCurrencies();\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props7 = this.props,\n          list = _this$props7.list,\n          fetching = _this$props7.fetching;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"pg-history-elem \".concat(list.length ? '' : 'pg-history-elem-empty'),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }\n      }, fetching && /*#__PURE__*/React.createElement(\"div\", {\n        className: \"text-center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 28\n        }\n      }, /*#__PURE__*/React.createElement(Spinner, {\n        animation: \"border\",\n        variant: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 57\n        }\n      })), list.length ? this.renderContent() : null, !list.length && !fetching ? /*#__PURE__*/React.createElement(\"p\", {\n        className: \"pg-history-elem__empty\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 44\n        }\n      }, this.props.intl.formatMessage({\n        id: 'page.noDataToShow'\n      })) : null);\n    }\n  }]);\n\n  return HistoryComponent;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    currencies: selectCurrencies(state),\n    marketsData: selectMarkets(state),\n    wallets: selectWallets(state),\n    list: selectHistory(state),\n    fetching: selectHistoryLoading(state),\n    page: selectCurrentPage(state),\n    firstElemIndex: selectFirstElemIndex(state, 25),\n    lastElemIndex: selectLastElemIndex(state, 25),\n    nextPageExists: selectNextPageExists(state, 25)\n  };\n};\n\nexport var mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    fetchCurrencies: function fetchCurrencies() {\n      return dispatch(currenciesFetch());\n    },\n    fetchHistory: function fetchHistory(params) {\n      return dispatch(_fetchHistory(params));\n    }\n  };\n};\nexport var HistoryElement = compose(injectIntl, connect(mapStateToProps, mapDispatchToProps))(HistoryComponent); // tslint:disable-line","map":{"version":3,"sources":["/Users/anthonypafundi/Desktop/baseapp/src/containers/HistoryElement/index.tsx"],"names":["React","Spinner","injectIntl","connect","compose","Decimal","History","Pagination","localeDate","setDepositStatusColor","setTradesType","setWithdrawStatusColor","truncateMiddle","currenciesFetch","fetchHistory","selectCurrencies","selectCurrentPage","selectFirstElemIndex","selectHistory","selectHistoryLoading","selectLastElemIndex","selectMarkets","selectNextPageExists","selectWallets","HistoryComponent","renderContent","props","type","firstElemIndex","lastElemIndex","page","nextPageExists","renderHeaders","retrieveData","onClickPrevPage","onClickNextPage","Number","limit","intl","formatMessage","id","list","map","item","renderTableRow","currencies","marketsData","wallets","amount","confirmations","created_at","currency","txid","blockchainLink","getBlockchainLink","wallet","find","obj","itemCurrency","cur","minConfirmations","min_confirmations","state","undefined","toUpperCase","format","fixed","color","fee","rid","side","market","price","total","marketToDisplay","m","name","price_precision","amount_precision","marketName","sideText","text","toLowerCase","currencyInfo","explorerTransaction","replace","explorerAddress","length","fetchCurrencies","nextProps","fetching","Component","mapStateToProps","mapDispatchToProps","dispatch","params","HistoryElement"],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { Spinner } from 'react-bootstrap';\nimport {\n    injectIntl,\n} from 'react-intl';\nimport {connect, MapDispatchToPropsFunction} from 'react-redux';\nimport { compose } from 'redux';\nimport { IntlProps } from '../../';\nimport { Decimal, History, Pagination } from '../../components';\nimport {\n    localeDate,\n    setDepositStatusColor,\n    setTradesType,\n    setWithdrawStatusColor,\n    truncateMiddle,\n} from '../../helpers';\nimport {\n    currenciesFetch,\n    Currency,\n    fetchHistory,\n    Market,\n    RootState,\n    selectCurrencies,\n    selectCurrentPage,\n    selectFirstElemIndex,\n    selectHistory,\n    selectHistoryLoading,\n    selectLastElemIndex,\n    selectMarkets,\n    selectNextPageExists,\n    selectWallets,\n    Wallet,\n    WalletHistoryList,\n} from '../../modules';\n\ninterface HistoryProps {\n    type: string;\n}\n\ninterface ReduxProps {\n    currencies: Currency[];\n    marketsData: Market[];\n    wallets: Wallet[];\n    list: WalletHistoryList;\n    fetching: boolean;\n    page: number;\n    firstElemIndex: number;\n    lastElemIndex: number;\n    nextPageExists: boolean;\n}\n\ninterface DispatchProps {\n    fetchCurrencies: typeof currenciesFetch;\n    fetchHistory: typeof fetchHistory;\n}\n\ntype Props = HistoryProps & ReduxProps & DispatchProps & IntlProps;\n\nclass HistoryComponent extends React.Component<Props> {\n    public componentDidMount() {\n        const { currencies, type } = this.props;\n        this.props.fetchHistory({ page: 0, type, limit: 25 });\n\n        if (currencies.length === 0) {\n            this.props.fetchCurrencies();\n        }\n    }\n\n    public componentWillReceiveProps(nextProps: Props) {\n        const { currencies } = this.props;\n\n        if (!currencies.length && nextProps.currencies.length) {\n            this.props.fetchCurrencies();\n        }\n    }\n\n    public render() {\n        const { list, fetching } = this.props;\n\n        return (\n          <div className={`pg-history-elem ${list.length ? '' : 'pg-history-elem-empty'}`}>\n              {fetching && <div className=\"text-center\"><Spinner animation=\"border\" variant=\"primary\" /></div>}\n              {list.length ? this.renderContent() : null}\n              {!list.length && !fetching ? <p className=\"pg-history-elem__empty\">{this.props.intl.formatMessage({id: 'page.noDataToShow'})}</p> : null}\n          </div>\n        );\n    }\n\n    public renderContent = () => {\n        const { type, firstElemIndex, lastElemIndex, page, nextPageExists } = this.props;\n\n        return (\n            <React.Fragment>\n                <History headers={this.renderHeaders(type)} data={this.retrieveData()}/>\n                <Pagination\n                    firstElemIndex={firstElemIndex}\n                    lastElemIndex={lastElemIndex}\n                    page={page}\n                    nextPageExists={nextPageExists}\n                    onClickPrevPage={this.onClickPrevPage}\n                    onClickNextPage={this.onClickNextPage}\n                />\n            </React.Fragment>\n        );\n    };\n\n    private onClickPrevPage = () => {\n        const { page, type } = this.props;\n        this.props.fetchHistory({ page: Number(page) - 1, type, limit: 25 });\n    };\n\n    private onClickNextPage = () => {\n        const { page, type } = this.props;\n        this.props.fetchHistory({ page: Number(page) + 1, type, limit: 25 });\n    };\n\n    private renderHeaders = (type: string) => {\n        switch (type) {\n          case 'deposits':\n              return [\n                  this.props.intl.formatMessage({id: 'page.body.history.deposit.header.txid'}),\n                  this.props.intl.formatMessage({id: 'page.body.history.deposit.header.date'}),\n                  this.props.intl.formatMessage({id: 'page.body.history.deposit.header.currency'}),\n                  this.props.intl.formatMessage({id: 'page.body.history.deposit.header.amount'}),\n                  this.props.intl.formatMessage({id: 'page.body.history.deposit.header.status'}),\n              ];\n          case 'withdraws':\n              return [\n                  this.props.intl.formatMessage({id: 'page.body.history.withdraw.header.address'}),\n                  this.props.intl.formatMessage({id: 'page.body.history.withdraw.header.date'}),\n                  this.props.intl.formatMessage({id: 'page.body.history.withdraw.header.currency'}),\n                  this.props.intl.formatMessage({id: 'page.body.history.withdraw.header.amount'}),\n                  this.props.intl.formatMessage({id: 'page.body.history.withdraw.header.fee'}),\n                  this.props.intl.formatMessage({id: 'page.body.history.withdraw.header.status'}),\n              ];\n          case 'trades':\n              return [\n                  this.props.intl.formatMessage({id: 'page.body.history.trade.header.date'}),\n                  this.props.intl.formatMessage({id: 'page.body.history.trade.header.side'}),\n                  this.props.intl.formatMessage({id: 'page.body.history.trade.header.market'}),\n                  this.props.intl.formatMessage({id: 'page.body.history.trade.header.price'}),\n                  this.props.intl.formatMessage({id: 'page.body.history.trade.header.amount'}),\n                  this.props.intl.formatMessage({id: 'page.body.history.trade.header.total'}),\n              ];\n          default:\n              return [];\n        }\n    };\n\n\n    private retrieveData = () => {\n        const { type, list } = this.props;\n\n        return [...list]\n            .map(item => this.renderTableRow(type, item));\n    };\n\n    private renderTableRow = (type, item) => {\n        const {\n            currencies,\n            intl,\n            marketsData,\n            wallets,\n        } = this.props;\n        switch (type) {\n            case 'deposits': {\n                const { amount, confirmations, created_at, currency, txid } = item;\n                const blockchainLink = this.getBlockchainLink(currency, txid);\n                const wallet = wallets.find(obj => obj.currency === currency);\n                const itemCurrency = currencies && currencies.find(cur => cur.id === currency);\n                const minConfirmations = itemCurrency && itemCurrency.min_confirmations;\n                const state = (item.state === 'submitted' && confirmations !== undefined && minConfirmations !== undefined) ? (\n                    `${confirmations}/${minConfirmations}`\n                ) : (\n                    intl.formatMessage({id: `page.body.history.deposit.content.status.${item.state}`})\n                );\n\n                return [\n                    <div className=\"pg-history-elem__hide\" key={txid}>\n                        <a href={blockchainLink} target=\"_blank\" rel=\"noopener noreferrer\">\n                            {truncateMiddle(txid, 30)}\n                        </a>\n                    </div>,\n                    localeDate(created_at, 'fullDate'),\n                    currency && currency.toUpperCase(),\n                    wallet && Decimal.format(amount, wallet.fixed, ','),\n                    <span style={{ color: setDepositStatusColor(item.state) }} key={txid}>{state}</span>,\n                ];\n            }\n            case 'withdraws': {\n                const { txid, created_at, currency, amount, fee, rid } = item;\n                const state = intl.formatMessage({ id: `page.body.history.withdraw.content.status.${item.state}` });\n                const blockchainLink = this.getBlockchainLink(currency, txid, rid);\n                const wallet = wallets.find(obj => obj.currency === currency);\n\n                return [\n                    <div className=\"pg-history-elem__hide\" key={txid || rid}>\n                        <a href={blockchainLink} target=\"_blank\" rel=\"noopener noreferrer\">\n                            {truncateMiddle(txid || rid, 30)}\n                        </a>\n                    </div>,\n                    localeDate(created_at, 'fullDate'),\n                    currency && currency.toUpperCase(),\n                    wallet && Decimal.format(amount, wallet.fixed, ','),\n                    wallet && Decimal.format(fee, wallet.fixed, ','),\n                    <span style={{ color: setWithdrawStatusColor(item.state) }} key={txid || rid}>{state}</span>,\n                ];\n            }\n            case 'trades': {\n                const { id, created_at, side, market, price, amount, total } = item;\n                const marketToDisplay = marketsData.find(m => m.id === market) ||\n                    { name: '', price_precision: 0, amount_precision: 0 };\n                const marketName = marketToDisplay ? marketToDisplay.name : market;\n                const sideText = setTradesType(side).text.toLowerCase() ? intl.formatMessage({id: `page.body.history.trade.content.side.${setTradesType(side).text.toLowerCase()}`}) : '';\n\n                return [\n                    localeDate(created_at, 'fullDate'),\n                    <span style={{ color: setTradesType(side).color }} key={id}>{sideText}</span>,\n                    marketName,\n                    <Decimal key={id} fixed={marketToDisplay.price_precision} thousSep=\",\">{price}</Decimal>,\n                    <Decimal key={id} fixed={marketToDisplay.amount_precision} thousSep=\",\">{amount}</Decimal>,\n                    <Decimal key={id} fixed={marketToDisplay.amount_precision} thousSep=\",\">{total}</Decimal>,\n                ];\n            }\n            default: {\n                return [];\n            }\n        }\n    };\n\n    private getBlockchainLink = (currency: string, txid: string, rid?: string) => {\n        const { wallets } = this.props;\n        const currencyInfo = wallets && wallets.find(wallet => wallet.currency === currency);\n        if (currencyInfo) {\n            if (txid && currencyInfo.explorerTransaction) {\n                return currencyInfo.explorerTransaction.replace('#{txid}', txid);\n            }\n            if (rid && currencyInfo.explorerAddress) {\n                return currencyInfo.explorerAddress.replace('#{address}', rid);\n            }\n        }\n\n        return '';\n    };\n}\n\n\nconst mapStateToProps = (state: RootState): ReduxProps => ({\n    currencies: selectCurrencies(state),\n    marketsData: selectMarkets(state),\n    wallets: selectWallets(state),\n    list: selectHistory(state),\n    fetching: selectHistoryLoading(state),\n    page: selectCurrentPage(state),\n    firstElemIndex: selectFirstElemIndex(state, 25),\n    lastElemIndex: selectLastElemIndex(state, 25),\n    nextPageExists: selectNextPageExists(state, 25),\n});\n\n\nexport const mapDispatchToProps: MapDispatchToPropsFunction<DispatchProps, {}> =\n    dispatch => ({\n        fetchCurrencies: () => dispatch(currenciesFetch()),\n        fetchHistory: params => dispatch(fetchHistory(params)),\n    });\n\nexport const HistoryElement = compose(\n    injectIntl,\n    connect(mapStateToProps, mapDispatchToProps),\n)(HistoryComponent) as any; // tslint:disable-line\n"]},"metadata":{},"sourceType":"module"}