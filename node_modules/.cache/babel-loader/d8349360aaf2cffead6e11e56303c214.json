{"ast":null,"code":"import { FilterPriceCustomStep } from './FilterPriceCustomStep';\nimport { FilterPriceSignificantDigit } from './FilterPriceSignificantDigit';\nexport var buildFilterPrice = function buildFilterPrice(filter) {\n  switch (filter.type) {\n    case 'significant_digits':\n      return new FilterPriceSignificantDigit(filter);\n\n    case 'custom_price_steps':\n      return new FilterPriceCustomStep(filter);\n\n    default:\n      throw new Error(\"Unknown filter \".concat(filter.type));\n  }\n};\nexport var validatePriceStep = function validatePriceStep() {\n  var price = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n  var filters = arguments.length > 1 ? arguments[1] : undefined;\n\n  if (filters && filters.length) {\n    return filters.reduce(function (result, filter) {\n      var currentValidation = filter.validatePriceStep(+price);\n\n      if (!currentValidation.valid) {\n        result.valid = false;\n\n        if (currentValidation.priceStep > result.priceStep) {\n          result.priceStep = currentValidation.priceStep;\n        }\n      }\n\n      return result;\n    }, {\n      valid: true,\n      priceStep: 0\n    });\n  }\n\n  return {\n    valid: true,\n    priceStep: 0\n  };\n};","map":{"version":3,"sources":["/Users/anthonypafundi/Desktop/baseapp/src/filters/FilterPrice/index.ts"],"names":["FilterPriceCustomStep","FilterPriceSignificantDigit","buildFilterPrice","filter","type","Error","validatePriceStep","price","filters","length","reduce","result","currentValidation","valid","priceStep"],"mappings":"AAKA,SAASA,qBAAT,QAAsC,yBAAtC;AACA,SAASC,2BAAT,QAA4C,+BAA5C;AAWA,OAAO,IAAMC,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACC,MAAD,EAAwC;AACpE,UAAQA,MAAM,CAACC,IAAf;AACI,SAAK,oBAAL;AACI,aAAO,IAAIH,2BAAJ,CAAgCE,MAAhC,CAAP;;AACJ,SAAK,oBAAL;AACI,aAAO,IAAIH,qBAAJ,CAA0BG,MAA1B,CAAP;;AACJ;AACI,YAAM,IAAIE,KAAJ,0BAA4BF,MAAM,CAACC,IAAnC,EAAN;AANR;AAQH,CATM;AAWP,OAAO,IAAME,iBAAiB,GAAG,SAApBA,iBAAoB,GAAyE;AAAA,MAAxEC,KAAwE,uEAA/C,CAA+C;AAAA,MAA5CC,OAA4C;;AACtG,MAAIA,OAAO,IAAIA,OAAO,CAACC,MAAvB,EAA+B;AAC3B,WAAOD,OAAO,CAACE,MAAR,CAAe,UAACC,MAAD,EAASR,MAAT,EAAoB;AACtC,UAAMS,iBAAiB,GAAGT,MAAM,CAACG,iBAAP,CAAyB,CAACC,KAA1B,CAA1B;;AAEA,UAAI,CAACK,iBAAiB,CAACC,KAAvB,EAA8B;AAC1BF,QAAAA,MAAM,CAACE,KAAP,GAAe,KAAf;;AACA,YAAID,iBAAiB,CAACE,SAAlB,GAA8BH,MAAM,CAACG,SAAzC,EAAoD;AAChDH,UAAAA,MAAM,CAACG,SAAP,GAAmBF,iBAAiB,CAACE,SAArC;AACH;AACJ;;AAED,aAAOH,MAAP;AACH,KAXM,EAWJ;AAAEE,MAAAA,KAAK,EAAE,IAAT;AAAeC,MAAAA,SAAS,EAAE;AAA1B,KAXI,CAAP;AAYH;;AAED,SAAO;AAAED,IAAAA,KAAK,EAAE,IAAT;AAAeC,IAAAA,SAAS,EAAE;AAA1B,GAAP;AACH,CAjBM","sourcesContent":["import {\n    MarketFilter,\n    MarketFilterCustomStep,\n    MarketFilterSignificantDigit,\n} from '../../modules';\nimport { FilterPriceCustomStep } from './FilterPriceCustomStep';\nimport { FilterPriceSignificantDigit } from './FilterPriceSignificantDigit';\n\nexport interface PriceValidation {\n    valid: boolean;\n    priceStep: number;\n}\n\nexport interface FilterPrice {\n    validatePriceStep(price: number): PriceValidation;\n}\n\nexport const buildFilterPrice = (filter: MarketFilter) : FilterPrice => {\n    switch (filter.type) {\n        case 'significant_digits':\n            return new FilterPriceSignificantDigit(filter as MarketFilterSignificantDigit);\n        case 'custom_price_steps':\n            return new FilterPriceCustomStep(filter as MarketFilterCustomStep);\n        default:\n            throw new Error(`Unknown filter ${filter.type}`);\n    }\n};\n\nexport const validatePriceStep = (price: string | number = 0, filters: FilterPrice[]): PriceValidation => {\n    if (filters && filters.length) {\n        return filters.reduce((result, filter) => {\n            const currentValidation = filter.validatePriceStep(+price);\n\n            if (!currentValidation.valid) {\n                result.valid = false;\n                if (currentValidation.priceStep > result.priceStep) {\n                    result.priceStep = currentValidation.priceStep;\n                }\n            }\n\n            return result;\n        }, { valid: true, priceStep: 0 } as PriceValidation);\n    }\n\n    return { valid: true, priceStep: 0 } as PriceValidation;\n};\n"]},"metadata":{},"sourceType":"module"}